### Developing on AWS 1ì¼ì°¨

### ìˆ˜ì—… ê°œìš”
- pythonì„ í†µí•´ ì§„í–‰
- 3ì¼ ì´ë¡  4ì¼ ì‹¤ìŠµ
- Jamì„ í†µí•´ ë¬¸ì œ ìƒí™© ì ‘í–ˆì„ ì‹œ í•´ê²°í•˜ëŠ” ìˆ˜ì—…
- 5ì¼ì°¨ì— Jamì´ í•œë²ˆ ë” ìžˆìŒ
- ìˆ˜ì—…ì€ ì„œë²„ë¦¬ìŠ¤ ìœ„ì£¼ë¡œ ì§„í–‰ì´ ë¨
- ìˆ˜ì—…ì€ ê²Œì‹œíŒì„ ëª©í‘œë¡œ ì§„í–‰ë êº¼ê³  ë°±,í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œëŠ” ì œê³µí•´ì¤Œ | ê·¸ ì‚¬ì´ì‚¬ì´ ì½”ë“œë§Œ í•¨
 
---

### ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ì¶• [ëª¨ë“ˆ1]
![alt text](../../a_images/app_structure.png)

---

### AWSì—ì„œ ê°œë°œ ì‹œìž‘í•˜ê¸° [ëª¨ë“ˆ3]

### AWS ì„œë¹„ìŠ¤ì— í”„ë¡œê·¸ëž˜ë° ë°©ì‹ìœ¼ë¡œ ì•¡ì„¸ìŠ¤

[AWS REST API]
> Rest API ë°©ì‹ì—ì„œ ìš”ì²­ê³¼ ì‘ë‹µì„ í•˜ëŠ”ë° AWSë„ ë§ˆì°¬ê°€ì§€ë¡œ HTTPë¥¼ í†µí•´ ì†Œí†µí•œë‹¤.

HTTP ìƒíƒœ ì½”ë“œ
- 100 ì‹œë¦¬ì¦ˆ
    - Informational
- 200 ì‹œë¦¬ì¦ˆ
    - Success
- 300 ì‹œë¦¬ì¦ˆ
    - Redirection
- 400 ì‹œë¦¬ì¦ˆ
    - Client error
- 500 ì‹œë¦¬ì¦ˆ
    - Server error

> ë˜í•œ SDK ë°©ì‹ìœ¼ë¡œ ì§„í–‰ì´ ëœë‹¤. ì¦‰ ì½”ë“œë¡œ ì§„í–‰ì´ ë¨ (ì½˜ì†”ì€ ê±°ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.)

### SDKë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ 
- ì–¸ì–´ ë°”ì¸ë”©
- HTTP ìš”ì²­ ì„œëª…
- ê¸°ë³¸ íƒ‘ìž¬í•˜ê³  ìžˆëŠ” ë³µì›ë ¥ ê´€ë ¨ ê¸°ëŠ¥
- ìž¬ì‹œë„/ì˜¤ë¥˜/ì‹œê°„ ì œí•œ ë¡œì§
- íŽ˜ì´ì§€ ë§¤ê¹€(Pagination) ì§€ì›

### SDKë¥¼ ì‚¬ìš©í•˜ëŠ”ë° ê³ ë ¤ì‚¬í•­
[ì‚¬ìš©í•  SDK API ê²°ì •]
- í•˜ìœ„ ìˆ˜ì¤€ API
    - ì„œë¹„ìŠ¤ ìž‘ì—…ë‹¹ ë©”ì„œë“œê°€ 1ê°œìžˆìŒ
- ìƒìœ„ ìˆ˜ì¤€
    - ê°œë…ì  ë¦¬ì†ŒìŠ¤ë‹¹ 1ê°œì˜ í´ëž˜ìŠ¤ê°€ ìžˆìŒ
    - ì„œë¹„ìŠ¤ ë¦¬ì†ŒìŠ¤ì™€ ê°œë³„ ë¦¬ì†ŒìŠ¤ë¥¼ ì •ì˜

=>  ë‘˜ì„ ê±°ì˜ ê°™ì´ ì‚¬ìš©í•˜ê¸´í•¨

### CLI ë¬¸ë²•
> AWS CLIëŠ” Botocoreë¼ëŠ” Python ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. AWS Python SDK 
Boto3 ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” Botocoreë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•©ë‹ˆë‹¤. AWS ëª…ë ¹ì¤„ í˜¸ì¶œì˜ ê¸°ë³¸ êµ¬ì¡°ëŠ” aws ëª…ë ¹ê³¼ ê·¸ ë’¤ì— ì˜¤ëŠ” ë‹¤ìŒ ë¶€ë¶„ìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. 

![alt text](../../a_images/AWS_CLI.png)

### SDK ë° í”„ë¡œê·¸ëž˜ë° íŒ¨í„´
> ì‚¬ì‹¤ ì‹¤ìŠµìœ¼ë¡œ ì§„í–‰í•˜ëŠ”ê²Œ ì¢‹ìŒ

- ì„œë¹„ìŠ¤ ìž‘ì—…
    - JSON í˜•íƒœë¡œ ì§„í–‰ì´ë¨
- ë¹„ë™ê¸°ì‹ ìž‘ì—… : ìš”ì²­ ë°”ë¡œ ì§„í–‰
    - ë™ê¸°ì‹ìœ¼ë¡œë„ ì§„í–‰ì´ ë¨ : ìš”ì²­ ëë‚ ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¼ -> ë³´í†µì€ ë™ê¸°ì‹ìœ¼ë¡œ ì§„í–‰

### í†µí•© ê°œë°œ í™˜ê²½ (IDE)
> IDE ë„êµ¬ í‚¤íŠ¸

- Eclipse 
- Rider
- WebStorm
- Visual Studio Code
- Intellij
- Azure DevOps
ë“±ë“±ë“±

-> ì´ëŸ° íˆ´ë“¤ì„ ì‚¬ìš©í•˜ì—¬ AwS ë¥¼ ì‚¬ìš©í•´ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìƒì„±, ë°°í¬, ë””ë²„ê¹…ì´ ì‰¬ì›Œì§

---

### Amazon Q
> ìƒì„±í˜•  AI ê¸°ë°˜ ì–´ì‹œìŠ¤í„´íŠ¸

- ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œ ìˆ˜ëª… ì£¼ê¸° (SDLC)ë¥¼ ì „ì²´ì ìœ¼ë¡œ ì§€ì›
    - ê³„íš
    - ìƒì„±
    - í…ŒìŠ¤íŠ¸ ë° ë³´ì•ˆ
    - ìš´ì˜
    - ìœ ì§€ ê´€ë¦¬ ë° í˜„ëŒ€í™”

---

### ê¶Œí•œ ë¶€ì—¬ [ëª¨ë“ˆ4]
- roleì— ëŒ€í•œ ë„ˆë¬´ë„ˆë¬´ í—·ê°ˆë¦° ë¶€ë¶„
> â€œRole ì‚¬ìš©ì€ AWS ì„œë¹„ìŠ¤ê°€ ìžë™ìœ¼ë¡œ ìˆ˜í–‰í•˜ì§€ë§Œ,
ê·¸ Roleì„ ì„œë¹„ìŠ¤ì— ë¶€ì—¬í•˜ê³  ìž‘ë™ì‹œí‚¤ëŠ” ì‹œìž‘ì ì€ í•­ìƒ ë¡œê·¸ì¸í•œ IAM ì‚¬ìš©ìžë‹¤.â€

![alt text](../../a_images/aws_role_give.png)

---
### Storage ì‚¬ìš©í•˜ê¸°[ëª¨ë“ˆ5]
> ì—¬ê¸°ì„œë„ ëŒ€ë¶€ë¶„ S3 ì‚¬ìš©

### ìŠ¤í† ë¦¬ì§€ì˜ ìœ í˜•
- ë¸”ë¡ ìŠ¤í† ë¦¬ì§€ : ë…¸íŠ¸ë¶ì—ìžˆëŠ”ê²Œ ë³´í†µ ë¸”ë¡ìž„
    -  ë²”ìš© SSD
    - í”„ë¡œë¹„ì €ë‹ëœ IOPS SSD
    -  ì²˜ë¦¬ëŸ‰ ìµœì í™” HDD
    - ì½œë“œ HDD
- íŒŒì¼ ìŠ¤í† ë¦¬ì§€
    - EFS Standard
    - EFS Infrequent Access
    - FSx for Lustre
    - Amazon FSx for NetApp ONTAP
    - Amazon FSx for OpenZFS
- ê°ì²´ ìŠ¤í† ë¦¬ì§€ : ì–˜ëŠ” í•˜ë‚˜ ì˜¬ë¦¬ê³  ë³€ê²½ì´ ì•ˆë˜ê³  ë‹¤ì‹œ ì˜¬ë ¤ì•¼í•¨ | ì‚¬ì‹¤ì´ê±¸ ì“°ëŠ”ê±´ ì•ˆì¢‹ìŒ
    - S3 Standard
    - S3 Standard-IA
    - S3 One Zone-IA
    - S3 Intelligent-Tiering
    - S3 Glacier Flexible Retrieval 
    - S3 Glacier Deep Archive

### S3 êµ¬ì„±ìš”ì†Œ
https://notes-bucket.s3.us-west-2.amazonaws.com/awsservice/notes.txt  ìœ¼ë¡œ

- S3 ë²„í‚·ì´ë¦„ : notes-bucket
- í‚¤ : awsservice/notes.txt (urlìŠ¤íƒ€ì¼)
    - ì ‘ë‘ì‚¬ : /awsservice
    - ì´ë¦„ : /notes.txt
---

### ë²„ì „ ê´€ë¦¬
> ê°ì²´ì˜ ë²„ì „ IDëŠ” ì‹œìŠ¤í…œì—ì„œ ì •ì˜í•œ ë©”íƒ€ë°ì´í„°ì˜ ì¼ë¶€ìž…ë‹ˆë‹¤. ê¸°ë³¸ê°’ìœ¼ë¡œ S3 ë²„í‚·ì—ëŠ” ë²„ì „ ê´€ë¦¬ê°€ ë¹„í™œì„±í™”ë˜ì–´ ìžˆìŠµë‹ˆë‹¤. 
- ë²„ì „ ê´€ë¦¬ê°€ ë¹„í™œì„±í™”ëœ ë²„í‚·ì—ì„œëŠ” ê°ì²´ì˜ ë²„ì „ ID ê°’ì´ nullìž…ë‹ˆë‹¤.
- ë²„ì „ ê´€ë¦¬ê°€ í™œì„±í™”ëœ ë²„í‚·ì—ì„œëŠ” ê°ì²´ì˜ ë²„ì „ë³„ë¡œ ê³ ìœ í•œ ë²„ì „ IDê°€ ìžˆìŠµë‹ˆë‹¤. 
-> ë®ì–´ì“°ê¸°ë‚˜ ì‚­ì œê°€ ë  ìˆ˜ ìžˆì–´ ê°ì²´ë¥¼ ìž êµ¬ëŠ” ì„¤ì •ì„ í•œë‹¤.

### ë²„ì „ ì‚­ì œ
- DELETE 
    - ë²„í‚·ì— ì‚­ì œ ë§ˆì»¤ë¥¼ ì‚½ìž…í•˜ê³  ì´ë¥¼ ê°ì²´ì˜ í˜„ìž¬ ë²„ì „ìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.
- DELETE Object versionId 
    - íŠ¹ì • ê°ì²´ ë²„ì „ì„ ì˜êµ¬ì ìœ¼ë¡œ ì‚­ì œí•©ë‹ˆë‹¤.

### S3ì˜ ê¶Œí•œ
> ê¶Œí•œë§Œ 150ê°œê°€ ë¨
- ì‚¬ìš©ìž ê¸°ë°˜ ì œì–´ì—ì„œ -> ë¦¬ì†ŒìŠ¤ ê¸°ë°˜ìœ¼ë¡œ ë°”ê¾¸ëŠ”ê²Œ ì¢‹ë‹¤.

### ì—‘ì„¸ìŠ¤ í¬ì¸íŠ¸
> ë‹¤ë¥¸ ë¶€ì„œë§ˆë‹¤ ê¶Œí•œì„ ë‚˜ëˆ„ì–´ì£¼ëŠ”ë° ê° ë¶€ì„œë§ˆë‹¤ í•„ìš”í•œ ê¶Œí•œì´ 
ê·¸ ê° í•„ìš” ê¶Œí•œì„ ì—‘ì„¸ìŠ¤ í¬ì¸íŠ¸ë¥¼ í†µí•´ ê³µìœ í•œë‹¤.

### ì•¤ë“œí¬ì¸íŠ¸
> ì—‘ì„¸ìŠ¤ í¬ì¸íŠ¸ë¥¼ í†µí•´ ì•¤ë“œí¬ì¸íŠ¸ ì£¼ì†Œë¥¼ ë‹¤ë£¬ë‹¤.

### í•˜ìœ„ìˆ˜ì¤€ ëª…ë ¹ì–´ & ìƒìœ„ ìˆ˜ì¤€ ëª…ë ¹ì–´
> ì•žì„œ ì´ì•¼ê¸° í•˜ì˜€ì§€ë§Œ ë‹¤ì‹œ í•œë²ˆ
- í•˜ìœ„ìˆ˜ì¤€
    - ì„¸ë¶€ìˆ˜ì¤€ ì œì–´
    - S3 APIì™€ ì¼ëŒ€ì¼ ë§¤í•‘
- ìƒìœ„ ìˆ˜ì¤€ 
    - í° ë²”ìœ„ì˜ ëª…ë ¹ì–´
    - ë” ë§Žì€ ê°’ì´ ë‚˜ì˜´
    - ë” ë¹ ë¥´ì§€ë§Œ í•œê³„ê°€ ìžˆìŒ

### SDKë¥¼ í†µí•œ S3ìž‘ì—…
> ì¦‰ í”„ë¡œê·¸ëž˜ë°ì„ í†µí•´ ë‹¤ë£¬ë‹¤.

- 1ë‹¨ê³„

![alt text](../../a_images/s3_serivce_start.png)

-> ë…¸íŠ¸ë¶ ê°™ì€ ê²½ìš°ì—ëŠ” ë¬´ì¡°ê±´ í•´ì£¼ì–´ì•¼í•¨

- 2ë‹¨ê³„
> ê° ì–¸ì–´ì— ë§¡ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¶”ê°€í•´ì¤€ë‹¤

![alt text](../../a_images/s3_library.png)

- 3ë‹¨ê³„
> ì‹¤ì œ ì½”ë“œë¥¼ í†µí•´ ì‚¬ìš©í•˜ëŠ”ê²ƒ

- 5ë‹¨ê³„
> ëª¨ë“ ê±¸ ë§ˆì¹˜ê³  close()ë¥¼ í•˜ëŠ” ë²„ë¦‡ì´ ìžˆì–´ì•¼í•¨

---

### ë²„í‚· ìž‘ì—… [ëª¨ë“ˆ6]
> AWS SDK ë˜ëŠ” AWS Command Line Interface(AWS CLI)ê°€ êµ¬ì„±ë˜ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í†µí•´ Amazon S3ì—ì„œ ìž‘ì—…í•  ì¤€ë¹„ê°€ ëœ ê²ƒìž…ë‹ˆë‹¤. ì ì ˆí•œ ê¶Œí•œì´ ìžˆìœ¼ë©´ ë²„í‚·ì„ ìƒì„±, ë‚˜ì—´, ì‚­ì œ ê·¸ë¦¬ê³  êµ¬ì„±í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. 

![alt text](../../a_images/aws_bucket_work.png)

### ë²„í‚· ìƒì„±
> ë²„í‚·ì˜ ì´ë¦„ì€ ì¤‘ë³µì´ ë˜ë©´ì•ˆë˜ê¸° ë•Œë¬¸ì— ìƒê°ë³´ë‹¤ ì˜¤ë¥˜ë§Žì´ë‚¨

1. ë²„í‚· ì´ë¦„ ë° AWSë¦¬ì „
2. ë²„í‚· ìƒì„±
    - head-bucketì •ë³´ í™•ì¸ -> í•¨ìˆ˜ë¡œ ì´ë¦„ í™•ì¸í•˜ëŠ”ê²ƒ
    - ë²„í‚· ìƒì„± -> headbucketìœ¼ë¡œ ë¬¸ì œ ì—†ìœ¼ë©´ create
3. ë²„í‚· ì •ë³´ë¥¼ ê²€ìƒ‰í•˜ì—¬ ë²„í‚·ìƒì„±ì„ í™•ì¸

-> ë³´í†µ ë²„í‚·ì„ ë§Œë“¤ìžë§ˆìž ë¬´ì—‡ì¸ê°€ ì—…ë¡œë“œí•˜ëŠ”ë°
-> ë²„í‚·ì´ ë§Œë“¤ì–´ì§ˆë•Œê¹Œì§€ `ë™ê¸°ì‹`ìœ¼ë¡œ ê¸°ë‹¤ë¦¬ëŠ” ì½”ë“œê°€ ìžˆì–´ì•¼í•¨
- s3Client.get.waiter('bucket_exists')

### ê°ì²´ ìž‘ì—…
> ëŒ€ëŸ‰ ìž‘ì—…ì´ í•„ìš”í•  ë•Œ

#### ê°ì²´ ì—…ë¡œë“œ : PUT
> ë©€í‹°íŒŒíŠ¸ê°€ í•µì‹¬

![alt text](../../a_images/object_put.png)

### í•˜ìœ„ ìˆ˜ì¤€ ëª…ë ¹ì„ ì‚¬ìš©í•œ ë©€í‹°íŒŒíŠ¸ ì—…ë¡œë“œ
1. íŒŒì¼ì„ 5GBì´í•˜ë¡œ ë¶„í• 
2. create-multipart-upload ëª…ë ¹ì–´ë¥¼ í†µí•´ ì—…ë¡œë“œ ì‹œìž‘í•˜ê³  IDê²€ìƒ‰
3. upload-part ëª…ë ¹ì„ í†µí•´ ê° íŒŒíŠ¸ë¥¼ ì—…ë¡œë“œí•˜ê³  ETag ê°’ì„ ë°›ìŒ
4. list-parts ê¸°ëŠ¥ì„ ì´ìš©í•´ ëª¨ë“  ë¶€ë¶„ì´ ì—…ë¡œë“œë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ ì—…ë¡œë“œëœ ë¶€ë¶„ì„ ëª¨ë‘ ë‚˜ì—´
5. ETagë¥¼ ë‹¨ì¼ íŒŒì¼ë¡œ ì»´íŒŒì¼
6. complete-multipart-upload ëª…ë ¹ì„ í†µí•´ ì—…ë¡œë“œ ì™„ë£Œ

#### ë°ì´í„° ê²€ìƒ‰ : GET ë° HEAD
> ë‹¨ì¼ GETìš”ì²­ìœ¼ë¡œ ì™„ì „í•œ ê°ì²´ë¥¼ ë°›ì„ ìˆ˜ ìžˆìŠµë‹ˆë‹¤. 
  ë˜í•œ, í•„ìš”í•œ ë°”ì´íŠ¸ ë²”ìœ„ë¥¼ ì§€ì •í•˜ì—¬ ê°ì²´ì˜ ì¼ë¶€ë¶„ì„ ê²€ìƒ‰í•  ìˆ˜ë„ ìžˆìŠµë‹ˆë‹¤. 
  ì´ëŠ” ë„¤íŠ¸ì›Œí¬ ì—°ê²° ìƒíƒœê°€ ì•ˆ ì¢‹ê±°ë‚˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ê°ì²´ ë°ì´í„°ì˜ í•˜ìœ„ ì§‘í•©ë§Œ ì²˜ë¦¬í•  ìˆ˜ ìžˆê±°ë‚˜ ì²˜ë¦¬í•´ì•¼ í•˜ëŠ” ê²½ìš°ì— ìœ ìš©í•©ë‹ˆë‹¤.
ê¸°ë³¸ê°’ìœ¼ë¡œ GET ìž‘ì—…ì€ ê°ì²´ì˜ í˜„ìž¬ ë²„ì „ì„ ë°˜í™˜í•©ë‹ˆë‹¤. ë‹¤ë¥¸ ë²„ì „ì„ ë°˜í™˜í•˜ë ¤ë©´ versionId í•˜ìœ„ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. 
ê²½ìš°ì— ë”°ë¼ ê°ì²´ì˜ ë‚´ìš©ì´ ì•„ë‹Œ ë©”íƒ€ë°ì´í„°ì—ë§Œ ê´€ì‹¬ì´ ìžˆì„ ìˆ˜ ìžˆìŠµë‹ˆë‹¤. 
HEAD ìš”ì²­ì€ GET ìš”ì²­ê³¼ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ê°ì²´ì˜ ë©”íƒ€ë°ì´í„°ê°€ í¬í•¨ëœ í—¤ë”ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ HEAD ëŠ” ê°ì²´ì˜ ë³¸ë¬¸ì„ ë°˜í™˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

-> HeadëŠ” ë°ì´í„°ë¥¼ ë‹¤ìš´ ë°›ì§€ëŠ” ì•ŠìŒ

### ìž„ì‹œê¶Œí•œ ë¶€ì—¬ : Presigned URL
> ëˆ„êµ°ê°€ê°€ ë‹¤ìš´ì„ ë°›ì•„ì•¼í•œë‹¤ë©´. ê¸°ë³¸ì ìœ¼ë¡œ ë²„í‚·ì— ê°ì²´ë¥¼ ì˜¬ë¦¬ë©´ public accessë¡œ ë‹¤ìš´ì„ ë°›ì•„ì•¼í•¨
ë˜í•œ S3ëŠ” ë²„í‚·ì˜ ê¶Œí•œê³¼ object ê¶Œí•œì´ ë‹¤ë¦„

-> ê·¸ë ‡ê¸°ì— ë‘ ê¶Œí•œ ëª¨ë‘ í—ˆìš©ì„ í•´ì£¼ì–´ì•¼í•¨

ex) ìœ ë£Œì´ë¯¸ì§€ ë‹¤ìš´ë°›ê¸° ì‚¬ì´íŠ¸ -> ì´ë¯¸ì§€ ë‹¤ìš´ ì£¼ì†Œë¥¼ í†µí•´ ë‹¤ìš´ë°›ìŒ -> ê·¸ëŸ¬ë©´ ì´ ë§í¬ë¥¼ ê³µìœ í•˜ë©´ ëª¨ë“  ì‚¬ëžŒì´ ë‹¤ ë‹¤ìš´ ë°›ì„ ìˆ˜ ìžˆìŒ
ê·¸ëž˜ì„œ ì¼ì • ì‹œê°„ë§Œ ë‹¤ìš´ ë°›ì„ ìˆ˜ ìžˆë„ë¡ ì‹œê°„ ì„¤ì •ì„ í•¨ -> ì´ ìž‘ì—…ì´ Presigned URLìž„

---

### ì •ì  ì›¹ì‚¬ì´íŠ¸ í˜¸ìŠ¤íŒ…
> ì›ëž˜ EC2ë¡œ url ë°°í¬ë¥¼ í•˜ë©´ ìž¥ì• ê°€ ë°œìƒ ë˜ëŠ”ë°
S3ë¡œ í•˜ë©´ ìž¥ì• ê°€ ì—†ìŒ

// TODO : S3ë¡œ ì„œë²„ë¥¼ ì˜¬ë¦°ë‹¤? ì´ê²Œ ë­”ì†Œë¦¬?
-> ì´ê±´ `ì •ì  ì›¹ì‚¬ì´íŠ¸`ë¥¼ S3ì— ë°°í¬í•œë‹¤ëŠ” ëœ»

```
S3ëŠ” EC2ì²˜ëŸ¼ ì„œë²„ê°€ ì•„ë‹ˆë‹¤.
ì½”ë“œë¥¼ ì‹¤í–‰í•˜ê±°ë‚˜ API ìš”ì²­ì„ ì²˜ë¦¬í•˜ì§€ ì•ŠëŠ”ë‹¤

í•˜ì§€ë§Œ HTML, CSS, JS ê°™ì€ ì •ì  íŒŒì¼ì„ ì €ìž¥í•˜ê³  ì œê³µí•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
ì¦‰, â€œì„œë²„ê°€ ì—†ëŠ” ì›¹ì„œë²„ ì—­í• â€ì„ ëŒ€ì‹ í•´ì£¼ëŠ” ê±°ì˜ˆìš”.
ë˜í•œ, HTTPS ë˜ëŠ” ì—‘ì„¸ìŠ¤í¬ì¸íŠ¸ë¥¼ ì§€ì›í•˜ì§€ ì•Šê¸°ë•Œë¬¸ì— Httpsë¥¼ ì‚¬ìš©í•  ê²½ìš° CloudForntë¥¼ ì‚¬ìš©í•˜ì—¬ í˜¸ìŠ¤íŒ…ëœ ì›¹ì‚¬ì´í‹€ë¥¼ ì‚¬ìš©í•˜ë©´ë¨
```

ðŸŒ 2ï¸âƒ£ ê·¸ëž˜ì„œ "S3ë¡œ ì„œë²„ë¥¼ ì˜¬ë¦°ë‹¤"ì˜ ì§„ì§œ ì˜ë¯¸ëŠ”?

â†’ "ì •ì  ì›¹ì‚¬ì´íŠ¸ë¥¼ S3ì— ì—…ë¡œë“œí•´ì„œ ì‚¬ìš©ìžì—ê²Œ ì›¹íŽ˜ì´ì§€ë¥¼ ì œê³µí•œë‹¤"ëŠ”
ëœ»ì´ì—ìš”.

ì˜ˆë¥¼ ë“¤ì–´:

  ì—­í•      ì˜ˆì‹œ íŒŒì¼
  -------- ------------
  HTML     index.html
  CSS      style.css
  JS       script.js
  ì´ë¯¸ì§€   logo.png

ì´ëŸ° íŒŒì¼ë“¤ì„ S3 ë²„í‚·ì— ë„£ê³ ,\
ë²„í‚·ì„ 'Static Website Hosting' ëª¨ë“œë¡œ ì„¤ì •í•˜ë©´\
S3ê°€ ì›¹ ì„œë²„ì²˜ëŸ¼ íŒŒì¼ì„ ì¸í„°ë„·ì— ê³µê°œí•©ë‹ˆë‹¤ ðŸŒ

ì¦‰, ì‚¬ìš©ìžê°€\
ðŸ‘‰ https://my-bucket.s3-website.ap-northeast-2.amazonaws.com\
ìœ¼ë¡œ ì ‘ì†í•˜ë©´ S3ê°€ HTML íŽ˜ì´ì§€ë¥¼ ì§ì ‘ ë³´ì—¬ì£¼ëŠ” ê±°ì˜ˆìš”.

------------------------------------------------------------------------

ðŸ§± **3ï¸âƒ£ êµ¬ì¡°ì ìœ¼ë¡œ ë³´ë©´**

    [ì‚¬ìš©ìž ë¸Œë¼ìš°ì €]
          â”‚
          â–¼
    [Amazon S3 ë²„í‚· (ì •ì  ì›¹ì‚¬ì´íŠ¸ í˜¸ìŠ¤íŒ…)]
          â”‚
          â””â”€â”€ index.html, style.css, script.js ë“± ì œê³µ

ì¦‰, S3ê°€ ì„œë²„ ì—­í• ì´ë¼ê¸°ë³´ë‹¤\
"ì •ì  íŒŒì¼ì„ ì œê³µí•˜ëŠ” CDN(ì½˜í…ì¸  ì„œë²„)" ì—­í• ì„ í•˜ëŠ” ê²ë‹ˆë‹¤.

------------------------------------------------------------------------

âš™ï¸ **4ï¸âƒ£ ë§Œì•½ ë™ì  ê¸°ëŠ¥(API í˜¸ì¶œ ë“±)ì´ í•„ìš”í•˜ë‹¤ë©´?**

ê·¸ê±´ **API Gateway + Lambda** ì¡°í•©ìœ¼ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤.\
ì¦‰, ì„œë²„ë¦¬ìŠ¤ í™˜ê²½ì—ì„œëŠ” ë‹¤ìŒì²˜ëŸ¼ ë‚˜ë‰©ë‹ˆë‹¤ ðŸ‘‡

  ê¸°ëŠ¥                                        ë‹´ë‹¹ ì„œë¹„ìŠ¤
  ------------------------------------------- ----------------------
  ì›¹ íŽ˜ì´ì§€ ë³´ì—¬ì£¼ê¸°                          S3 (ì •ì  í˜¸ìŠ¤íŒ…)
  ì‚¬ìš©ìž ìš”ì²­ ì²˜ë¦¬ (ë¡œê·¸ì¸, ë°ì´í„° ì¡°íšŒ ë“±)   API Gateway + Lambda
  ë°ì´í„° ì €ìž¥                                 DynamoDB, S3 ë“±

------------------------------------------------------------------------

ðŸ”„ **ì˜ˆì‹œ íë¦„**

    ì‚¬ìš©ìž â”€â–¶ S3(HTML, JS, CSS)
              â”‚
              â–¼
          JSì—ì„œ í˜¸ì¶œ
              â–¼
         API Gateway â†’ Lambda â†’ DynamoDB

ì¦‰,\
- **S3 = í”„ë¡ íŠ¸ì—”ë“œ ì›¹í˜¸ìŠ¤íŒ…**\
- **Lambda/API Gateway = ë°±ì—”ë“œ ë¡œì§**\
- **DynamoDB = ë°ì´í„°ë² ì´ìŠ¤**

ì´ë ‡ê²Œ í•©ì³ì§„ êµ¬ì¡°ê°€ **"ì„œë²„ë¦¬ìŠ¤ í’€ìŠ¤íƒ(Serverless Full Stack)"**ìž…ë‹ˆë‹¤.

------------------------------------------------------------------------

âœ¨ **ìš”ì•½** \| í•­ëª© \| ì„¤ëª… \| \|------\|------\| \| S3ì˜ ë³¸ëž˜ ì—­í•  \|
íŒŒì¼(ì´ë¯¸ì§€, HTML, JS ë“±) ì €ìž¥ì†Œ \| \| ì„œë²„ë¦¬ìŠ¤ì—ì„œì˜ ì—­í•  \| "ì •ì 
ì›¹ì‚¬ì´íŠ¸ í˜¸ìŠ¤íŒ… ì„œë²„"ë¡œ ë™ìž‘ \| \| ì‹¤ì œ ì˜ë¯¸ \| EC2ì²˜ëŸ¼ ì„œë²„ë¥¼ ë„ìš°ëŠ” ê²Œ
ì•„ë‹ˆë¼, ì •ì  íŽ˜ì´ì§€ë¥¼ ë°°í¬í•˜ëŠ” ê²ƒ \| \| ë°±ì—”ë“œ ì—­í•  \| API Gateway +
Lambdaê°€ ë‹´ë‹¹ \|

### êµì°¨ ì˜¤ë¦¬ì§„ ë¦¬ì†ŒìŠ¤ ê³µìœ (CORS)
```
Amazon S3ì—ì„œëŠ” CORSë¥¼ ì§€ì›í•˜ë¯€ë¡œ Amazon S3ë¡œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¶•í•˜ê³  
ê°œë³„ì ìœ¼ë¡œ Amazon S3 ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ êµì°¨ ì˜¤ë¦¬ì§„ ì•¡ì„¸ìŠ¤ë¥¼ í—ˆìš©í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. 
CORSë¥¼ í™œì„±í™”í•˜ë ¤ë©´ CORS êµ¬ì„± XML íŒŒì¼ì„ ìƒì„±í•˜ì‹­ì‹œì˜¤. 
ì´ íŒŒì¼ì—ëŠ” ë²„í‚·ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìžˆëŠ” ì˜¤ë¦¬ì§„, ê° ì˜¤ë¦¬ì§„ì— ëŒ€í•´ ì§€ì›í•˜ëŠ” ìž‘ì—…(HTTP ë©”ì„œë“œ), ê¸°íƒ€ ìž‘ì—…ë³„ ì •ë³´ë¥¼ ì‹ë³„í•˜ëŠ” ê·œì¹™ì´ í¬í•¨ë˜ì–´ ìžˆìŠµë‹ˆë‹¤. 
êµ¬ì„±ë‹¹ ìµœëŒ€ 100ê°œì˜ ê·œì¹™ì„ ì¶”ê°€í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. AWS SDKë¥¼ ì‚¬ìš©í•˜ì—¬ S3 ë²„í‚·ì— CORS êµ¬ì„±ì„ ì ìš©í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤
```

ex) S3 ë²„í‚·ì— ì›¹ ê¸€ê¼´ì„ í˜¸ìŠ¤íŠ¸í•˜ë ¤ê³ í•œë‹¤. ëŒ€ì²´ ë„ë©”ì¸ì˜ ì›¹íŽ˜ì´ì§€ê°€ ì´ ì›¹ê¸€ê¼´ì„ ì‚¬ìš©í•  ìˆ˜ë„ ìžˆëŠ”ë°
ë¸Œë¼ìš°ì €ëŠ” ì´ ì›¹íŽ˜ì´ì§€ë¥¼ ë¡œë“œí•˜ê¸° ì „ì— ë¡œë”©í•  íŽ˜ì´ì§€ê°€ ìžˆëŠ” ë„ë©”ì¸ì—ì„œ s3ë²„í‚· ë¦¬ì†ŒìŠ¤ì— ì•¡ì„¸ìŠ¤ í•  ìˆ˜ ìžˆëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´
CORS ê²€ì‚¬ë¥¼ ìˆ˜í–‰í•œë‹¤.

[ì¶”ê°€] -> ì´ê²Œ ì¢€ ë” ì •í™•

1. ë¨¼ì € ì˜¤ë¦¬ì§„(Origin)ì´ëž€?
> ì˜¤ë¦¬ì§„ = `ë„ë©”ì¸ + í”„ë¡œí† ì½œ + í¬íŠ¸` ì¡°í•©

ì¦‰, ì¡°ê¸ˆì´ë¼ë„ ë‹¤ë¥´ë©´ ë‹¤ë¥¸ ì˜¤ë¦¬ì§„
| ì£¼ì†Œ | ì˜¤ë¦¬ì§„ |
|------|---------|
| `https://myapp.com` | `https://myapp.com` |
| `http://myapp.com` | âš ï¸ ì˜¤ë¦¬ì§„ ë‹¤ë¦„ (í”„ë¡œí† ì½œ ë‹¤ë¦„) |
| `https://api.myapp.com` | âš ï¸ ì˜¤ë¦¬ì§„ ë‹¤ë¦„ (ì„œë¸Œë„ë©”ì¸ ë‹¤ë¦„) |
| `https://myapp.com:8080` | âš ï¸ ì˜¤ë¦¬ì§„ ë‹¤ë¦„ (í¬íŠ¸ ë‹¤ë¦„) |

2. CORS ë¬¸ì œëŠ” ì™œ ìƒê¸¸ê¹Œ?
> ê¸°ë³¸ì ìœ¼ë¡œ "ë¸Œë¼ìš°ì €ëŠ” ë³´ì•ˆìƒ" `ê°™ì€ ì˜¤ë¦¬ì§„ë¼ë¦¬ë§Œ ìš”ì²­ì„ í—ˆìš©`í•œë‹¤.
ì´ê±¸ Same-Origin Policy(ë™ì¼ ì¶œì²˜ ì •ì±…) ì´ë¼ê³  í•¨

3. ê·¸ëž˜ì„œ ë‚˜ì˜¨ê²Œ CORS(êµì°¨ ì¶œì²˜ ë¦¬ì†ŒìŠ¤ ê³µìœ )
> ì„œë²„ê°€ ëª…ì‹œì ìœ¼ë¡œ "ì´ ì¶œì²˜ëŠ” ì ‘ê·¼í•´ë„ ê´œì°®ë‹¤" ë¼ê³  í—ˆë½ í•´ì£¼ëŠ” ë°©ì‹

ì¦‰, ì„œë²„ê°€ ì´ëŸ° í—¤ë”ë¥¼ ì‘ë‹µì— í¬í•¨ ì‹œí‚¤ë©´ ë¨
```
Access-Control-Allow-Origin: https://myapp.com
```

ì´ëŸ¬ë©´ ë¸Œë¼ìš°ì €ëŠ” ì•„ í—ˆë½í–ˆë„¤? ë¼ê³  í•¨

### CORS ì •ë¦¬
> CORS = "ì„œë¡œ ë‹¤ë¥¸ ì¶œì²˜ ê°„ ë¦¬ì†ŒìŠ¤ ê³µìœ ë¥¼ í—ˆìš©í•´ì£¼ëŠ” ê·œì¹™"