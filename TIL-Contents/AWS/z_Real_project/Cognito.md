### Cognito란?
> AWS Cognito는 AWS에서 제공하는 사용자 인증 및 권한 관리 서비스로 일반적으로 아래와 같은 기능을 제공

- 소셜 로그인(OAuth, 예: Google, Facebook, Apple 등)
- 자체 이메일/비밀번호 로그인
- 토큰 발급 (Access Token, ID Token, Refresh Token)
- 사용자 풀(User Pool), 자격 증명 풀(Identity Pool) 제공

> 👉 쉽게 말하면, OAuth 로그인을 직접 구현하지 않고도 AWS Cognito를 통해 간편하게 설정할 수 있고, 로그인 후 사용자 정보도 자동으로 관리된다.

### DynamoDB의 사용
> Cognito는 인증/인가 처리까지만 해주고, 비즈니스용 `사용자 정보 저장은 따로 하지 않는다`

그래서 다음과 같은 `사용자 데이터`를 별도로 저장하려면 `DynamoDB 등 DB가` 필요

- 즉, Cognito는 "누구인지 확인만 해주는 역할", DynamoDB는 **"그 사람에 대한 추가 정보를 저장하는 역할"**을 합니다.

### 그렇다면 나의 의문점 
```
그러면 Cognito는 말그대로 로그인인증처리만 해주는거고 
이걸통해 가입된 회원의 이메일 등의 정보는 따로 DB가 필요한데 이걸 Dynamo DB에 저장한다는거지? 
그래서 백엔드에서는 이 DB를 연결해서 사용하는거고 그러면 User정보를 다이나모dB에 저장하면 
이게 User테이블이 되는거고 따로 사용자의 성향이나 남자인지여자인지 profile에 대한 정보를 
DynamoDB에 따로 받아 저장한다고하면 User테이블이랑 RDB때처럼 연관관계를 맺으면 되는거야?
```

### [답변]

1. Cognito는 `로그인/회원가입`과 같은 <u>인증</u>처리 기능만 제공한다.
    - ex) Google로 회원가입하면 이메일,이름 정도는 Cognito에서 받아올 수 있음
    - 하지만 이 정보는 `임시적으로 토큰에 담겨있는것 뿐`, 나중에 비지니스로직 사용 시 DB 저장 필요

2. 그래서 User 테이블을 DynamoDB에 저장한다.

3. 성향, 프로필은 어디에 저장? -> 두가지 방법 존재
    - [방법 A] : User테이블에 함께 저장
    - [방법 B] : UserProfiles로 별도 분리 후 -> UserEmail과 같은 `파티션 키`로 연결

## 그렇다면! 백엔드에서의 흐름 정리
> 흐름 요약

1. 사용자가 OAuth로 로그인 → Cognito에서 인증 완료
2. 토큰에서 사용자 이메일 추출
3. DynamoDB Users 테이블에 해당 이메일이 있는지 확인
4. 없다면 신규 사용자 → Users, UserProfiles 등에 저장
5. 이후 API 호출 시마다 DynamoDB에서 사용자 정보 조회
